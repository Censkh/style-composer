<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/style-composer/blog/rss.xml" title="Style Composer Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/style-composer/blog/atom.xml" title="Style Composer Blog Atom Feed"><title data-react-helmet="true">Server Side Rendering | Style Composer</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Server Side Rendering | Style Composer"><meta data-react-helmet="true" name="description" content="Style composer has support for server side rendering frameworks such as NextJS. When rendering on the server any elements that would usually be added to the head of the page are instead collected and kept as React elements that you can instead access via StyleEvironment.getServerSideHeadElements()."><meta data-react-helmet="true" property="og:description" content="Style composer has support for server side rendering frameworks such as NextJS. When rendering on the server any elements that would usually be added to the head of the page are instead collected and kept as React elements that you can instead access via StyleEvironment.getServerSideHeadElements()."><meta data-react-helmet="true" property="og:url" content="https://censkh.github.io/style-composer//style-composer/ssr"><link data-react-helmet="true" rel="shortcut icon" href="/style-composer/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://censkh.github.io/style-composer//style-composer/ssr"><link rel="stylesheet" href="/style-composer/styles.3b29e043.css">
<link rel="stylesheet" href="/style-composer/main.cbd78227.css">
<link rel="preload" href="/style-composer/styles.6e6adebb.js" as="script">
<link rel="preload" href="/style-composer/runtime~main.e2256ffe.js" as="script">
<link rel="preload" href="/style-composer/main.8e68f6c6.js" as="script">
<link rel="preload" href="/style-composer/1.eb11ea5c.js" as="script">
<link rel="preload" href="/style-composer/1be78505.7848d019.js" as="script">
<link rel="preload" href="/style-composer/20.e237c682.js" as="script">
<link rel="preload" href="/style-composer/935f2afb.72627e6b.js" as="script">
<link rel="preload" href="/style-composer/21.6d1b6d55.js" as="script">
<link rel="preload" href="/style-composer/bcc66c02.2d41fd6c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/style-composer/"><strong class="navbar__title">Style Composer</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/style-composer/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/censkh/style-composer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/style-composer/"><strong class="navbar__title">Style Composer</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/style-composer/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/censkh/style-composer" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Style Composer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/style-composer/">Usage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/style-composer/cascading">Cascading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/style-composer/variants">Variants</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/style-composer/rule-order-and-important">Rule Order &amp; Important</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/style-composer/style-selectors">Style Selectors &amp; Media Queries</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/style-composer/child-selector">Child Selector</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/style-composer/pseudo-classes">Pseudo Classes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/style-composer/dynamic-units">Dynamic Units</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/style-composer/theming">Theming</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/style-composer/web-support">Web Support</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/style-composer/ssr">Server Side Rendering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/style-composer/fonts">ðŸš§ Fonts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Hooks</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/style-composer/use-composed-style">useComposedStyle()</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/style-composer/use-composed-value">useComposedValue()</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Server Side Rendering</h1></header><div class="markdown"><p>Style composer has support for server side rendering frameworks such as NextJS. When rendering on the server any elements that would usually be added to the head of the page are instead collected and kept as React elements that you can instead access via <code>StyleEvironment.getServerSideHeadElements()</code>.</p><h2 id="screen-size-emulation">Screen Size Emulation</h2><p>Usually device type can be inferred from the user agent of a request. When it can you can pass this device type to <code>StyleEnvironment.setDeviceType()</code> in order to emulate an appropriate screen size on the server. By default <code>&quot;desktop&quot;</code> is used.</p><p>Supported device types:</p><ul><li><code>&quot;mobile&quot;</code> (600x1200)</li><li><code>&quot;desktop&quot;</code> (1920x1080)</li></ul><h2 id="nextjs-example">NextJs Example</h2><pre><code class="language-js" metastring="title=&quot;next.config.js&quot;" title="&quot;next.config.js&quot;">const {withExpo} = require(&quot;@expo/next-adapter&quot;);

module.exports = withExpo({});
</code></pre><pre><code class="language-tsx" metastring="title=&quot;pages/_app.tsx&quot;" title="&quot;pages/_app.tsx&quot;">import React                  from &quot;react&quot;;
import {AppContext, AppProps} from &quot;next/app&quot;;
import Head                   from &quot;next/head&quot;;
import {StyleEnvironment}     from &quot;style-composer&quot;;

const NextApp = ({Component, pageProps}: AppProps) =&gt; {
  return &lt;&gt;
    &lt;Head&gt;
      &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;/&gt;
    &lt;/Head&gt;
    &lt;Component {...pageProps} /&gt;
  &lt;/&gt;;
};

NextApp.getInitialProps = async (props: AppContext) =&gt; {
  const isMobileView = (props.ctx.req
    ? props.ctx.req.headers[&quot;user-agent&quot;]
    : (typeof navigator !== &quot;undefined&quot; &amp;&amp; navigator.userAgent) || &quot;&quot;)?.match(
    /Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|Mobile Safari|IEMobile|WPDesktop/i,
  );

  StyleEnvironment.setDeviceType(Boolean(isMobileView) ? &quot;mobile&quot; : &quot;desktop&quot;);
  return {};
};

export default NextApp;
</code></pre><pre><code class="language-tsx" metastring="title=&quot;pages/_document.tsx&quot;" title="&quot;pages/_document.tsx&quot;">import Document, {Head, Html, Main, NextScript} from &quot;next/document&quot;;
import React                                    from &quot;react&quot;;
import {StyleEnvironment}                       from &quot;style-composer&quot;;
import {getInitialProps}                        from &quot;@expo/next-adapter/document&quot;;

class NextDocument extends Document {

  render() {
    return (
      &lt;Html lang={&quot;en&quot;} data-device-type={StyleEnvironment.getDeviceType()}&gt;
        &lt;Head&gt;
          &lt;meta charSet=&quot;UTF-8&quot;/&gt;
          &lt;meta httpEquiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;/&gt;
          {StyleEnvironment.getServerSideHeadElements()}
        &lt;/Head&gt;
        &lt;body&gt;
            &lt;Main/&gt;
            &lt;NextScript/&gt;
        &lt;/body&gt;
      &lt;/Html&gt;
    );
  }
}

NextDocument.getInitialProps = getInitialProps;

export default NextDocument;
</code></pre></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/censkh/style-composer/edit/master/website/docs/ssr.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/style-composer/web-support"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Web Support</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/style-composer/fonts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ðŸš§ Fonts Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#screen-size-emulation" class="table-of-contents__link">Screen Size Emulation</a></li><li><a href="#nextjs-example" class="table-of-contents__link">NextJs Example</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/style-composer/">Usage</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/censkh/style-composer" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/style-composer/styles.6e6adebb.js"></script>
<script src="/style-composer/runtime~main.e2256ffe.js"></script>
<script src="/style-composer/main.8e68f6c6.js"></script>
<script src="/style-composer/1.eb11ea5c.js"></script>
<script src="/style-composer/1be78505.7848d019.js"></script>
<script src="/style-composer/20.e237c682.js"></script>
<script src="/style-composer/935f2afb.72627e6b.js"></script>
<script src="/style-composer/21.6d1b6d55.js"></script>
<script src="/style-composer/bcc66c02.2d41fd6c.js"></script>
</body>
</html>