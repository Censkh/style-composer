(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{82:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return p})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return l}));var r=n(3),a=n(7),o=(n(0),n(91)),i={id:"ssr",title:"Server Side Rendering"},p={unversionedId:"ssr",id:"ssr",isDocsHomePage:!1,title:"Server Side Rendering",description:"Style composer has support for server side rendering frameworks such as NextJS. When rendering on the server any elements that would usually be added to the head of the page are instead collected and kept as React elements that you can instead access via StyleEvironment.getServerSideHeadElements().",source:"@site/docs/ssr.md",slug:"/ssr",permalink:"/style-composer/ssr",editUrl:"https://github.com/censkh/style-composer/edit/master/website/docs/ssr.md",version:"current",sidebar:"someSidebar",previous:{title:"Web Support",permalink:"/style-composer/web-support"},next:{title:"\ud83d\udea7 Fonts",permalink:"/style-composer/fonts"}},s=[{value:"Screen Size Emulation",id:"screen-size-emulation",children:[]},{value:"NextJs Example",id:"nextjs-example",children:[]}],c={toc:s};function l(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.a)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(o.a)("p",null,"Style composer has support for server side rendering frameworks such as NextJS. When rendering on the server any elements that would usually be added to the head of the page are instead collected and kept as React elements that you can instead access via ",Object(o.a)("inlineCode",{parentName:"p"},"StyleEvironment.getServerSideHeadElements()"),"."),Object(o.a)("h2",{id:"screen-size-emulation"},"Screen Size Emulation"),Object(o.a)("p",null,"Usually device type can be inferred from the user agent of a request. When it can you can pass this device type to ",Object(o.a)("inlineCode",{parentName:"p"},"StyleEnvironment.setDeviceType()")," in order to emulate an appropriate screen size on the server. By default ",Object(o.a)("inlineCode",{parentName:"p"},'"desktop"')," is used."),Object(o.a)("p",null,"Supported device types:"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},Object(o.a)("inlineCode",{parentName:"li"},'"mobile"')," (600x1200)"),Object(o.a)("li",{parentName:"ul"},Object(o.a)("inlineCode",{parentName:"li"},'"desktop"')," (1920x1080)")),Object(o.a)("h2",{id:"nextjs-example"},"NextJs Example"),Object(o.a)("pre",null,Object(o.a)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:'title="next.config.js"',title:'"next.config.js"'}),'const {withExpo} = require("@expo/next-adapter");\n\nmodule.exports = withExpo({});\n')),Object(o.a)("pre",null,Object(o.a)("code",Object(r.a)({parentName:"pre"},{className:"language-tsx",metastring:'title="pages/_app.tsx"',title:'"pages/_app.tsx"'}),'import React                  from "react";\nimport {AppContext, AppProps} from "next/app";\nimport Head                   from "next/head";\nimport {StyleEnvironment}     from "style-composer";\n\nconst NextApp = ({Component, pageProps}: AppProps) => {\n  return <>\n    <Head>\n      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>\n    </Head>\n    <Component {...pageProps} />\n  </>;\n};\n\nNextApp.getInitialProps = async (props: AppContext) => {\n  const isMobileView = (props.ctx.req\n    ? props.ctx.req.headers["user-agent"]\n    : (typeof navigator !== "undefined" && navigator.userAgent) || "")?.match(\n    /Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|Mobile Safari|IEMobile|WPDesktop/i,\n  );\n\n  StyleEnvironment.setDeviceType(Boolean(isMobileView) ? "mobile" : "desktop");\n  return {};\n};\n\nexport default NextApp;\n')),Object(o.a)("pre",null,Object(o.a)("code",Object(r.a)({parentName:"pre"},{className:"language-tsx",metastring:'title="pages/_document.tsx"',title:'"pages/_document.tsx"'}),'import Document, {Head, Html, Main, NextScript} from "next/document";\nimport React                                    from "react";\nimport {StyleEnvironment}                       from "style-composer";\nimport {getInitialProps}                        from "@expo/next-adapter/document";\n\nclass NextDocument extends Document {\n\n  render() {\n    return (\n      <Html lang={"en"} data-device-type={StyleEnvironment.getDeviceType()}>\n        <Head>\n          <meta charSet="UTF-8"/>\n          <meta httpEquiv="X-UA-Compatible" content="IE=edge"/>\n          {StyleEnvironment.getServerSideHeadElements()}\n        </Head>\n        <body>\n            <Main/>\n            <NextScript/>\n        </body>\n      </Html>\n    );\n  }\n}\n\nNextDocument.getInitialProps = getInitialProps;\n\nexport default NextDocument;\n')))}l.isMDXComponent=!0},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),l=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=l(n),u=r,f=m["".concat(i,".").concat(u)]||m[u]||d[u]||o;return n?a.a.createElement(f,p(p({ref:t},c),{},{components:n})):a.a.createElement(f,p({ref:t},c))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:r,i[1]=p;for(var c=2;c<o;c++)i[c]=n[c];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);